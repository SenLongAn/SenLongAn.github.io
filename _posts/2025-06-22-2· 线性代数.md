---
title: 2· 线性代数
date: 2025-06-22 12:00:00 +0800
categories: [数学]
tags: []
math: true
---

## 向量

* 两个向量a->b->是否相等取决于大小和方向，和位置无关
* 向量加减
  * 加
    * 平行四边形法则
    * a的终点连接b的起点，c为a的起点到b的终点
  * 减
    * 起点对齐，c为b的终点到a的终点,终点-起点（a的终点作为终点，b的终点作为起点）
    * 几何意义：空间中两个物体的相对方向
* 点乘
  * a*b = [a]*[b]*costheta，结果为数值非向量
  * 几何意义：（注意我们应对ab归一化，才能获得几何意义）
    * 是否平行/垂直：当结果为1平行，0垂直
    * 方向一致性：结果>0方向基本相同，夹角在0°到90°之间，结果<0方向基本相反，夹角在90°到180°之间
    * 投影长度
* 叉乘
  * 两行交叉相乘相减
  * 几何意义：
    * 判断向量位置关系： > 0：OB 在 OA 的左侧，< 0：OB 在 OA 的右侧
    * 判断点是否在三角形内部：设三角形顶点为 A, B, C，待判断点为 P，若AB和AP、BC和BP、CA和CP这三个叉乘结果同号，则点在内部
    * 获得垂直两个向量的第3向量：其中原两个向量不一定垂直，右手定则：右手四指从 a 指向 b，拇指方向即为叉乘向量的方向
* 长度：[a] = sqrt(x^2 + y^2 + z^2)
* 归一化：将向量的模即长度变为1，同时保持其方向不变，向量/向量的模
  * 几何意义：
    * 只关心/仅表示方向
* 投影：向量a在b方向上的投影，(a·b/|b|^2)·b
  * 投影推导：
    * 已知a向量和被投射b向量
    * 投射结果 a`= a'长度 * b方向(长度 * 方向 == 在此方向取一定长度作为向量)
    * a'长度 = a长度 * costheta(三角函数)
    * costheta = a * b / [a][b]（点乘公式）
    * 最后公式合并

## 矩阵

* 矩阵乘法
  * 矩阵是2维的元素集合，数组是一维的元素集合
  * A -> a*b B -> c*d C -> a*d 行*列，其中A.b == B.c
  * A每行e 和 B每列f，共b*d次，每次ef内部相同索引的元素相乘后求总和，写在C的e,f位置
* 矩阵乘法顺序
  * 从右向左依次相乘，应该遵守M（SRT）VP，这样的逆顺序写

## 齐次坐标

* 定义：将一个原本是n维的向量用一个n+1维向量来表示
* 作用：
  * 1·它可以应用于不同领域，其中应用于CG领域的坐标变换，可以支持平移操作
  * 正常情况一维坐标 * 一维矩阵，二维坐标 * 二维矩阵,三维坐标 * 三维矩阵，都只能做乘法让坐标缩放/旋转，不能位移
  * 2·w == 1表示点，w == 0表示向量，因为向量平移是没有意义的

## 已知入射向量和法线求反射向量

* r = l - 2dot(l,n)*n
* 首先将l入射和n法线单位化
* 推导：
  * 方法一
    * 新的向量连接l的起点和r的终点，分为两部分作为p，
    * r = 2p-l
    * p = l+s
    * s = l的-s上的投影（对齐起点）由于-s和s方向相反，应取反
    * n是单位向量，因此分母为1可省略
    * 最后公式合并
  * 方法二
    * 把s延长2倍,令n = 2s
    * 把r平移，r = l + 2s
    * s = l的-n上的投影由于-n和n方向相反，应取反
    * n是单位向量，因此分母为1可省略
    * 最后公式合并

## 已知入射向量和法线求折射向量

* 斯涅尔定律：n1sin = n2sin

